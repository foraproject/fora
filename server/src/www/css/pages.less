.content-area {
    &.upsize {
        h1 { font-size: 1.8em }
        h2 { font-size: 1.6em }
        h3 { font-size: 1.4em }
        p { font-size: 1.4em }
    }
}

.page-content-area(@contentAreaWidth, @maxWidth) {
    .content-area {
        width: @contentAreaWidth + 0px; max-width: @maxWidth; margin: auto;
        &.wide {
            width: 100%; max-width: 100%;
        }
    }
}

/* Pages-Common */
.pages-common() {
    .main-pane, .alt-pane {
        margin-top: 20px; padding: 0 24px 64px 24px; box-sizing: border-box; -moz-box-sizing: border-box; 
        > .nav {            
            &:before { content: ">"; display:block; float: left;  margin-right: 12px; }
        }
    }
    
    .main-pane {
        &:first-child {
            > .nav:first-child { margin-left: 40px; }
        }
    }
    
    .auto-cover, .top-cover, .full-cover {
        .image {
            background-size: cover; background-position: 50% 50%; height: 100%;
            > .underlay { opacity: 0.5; width: 100%; position: fixed; height: 100%; }
            > .content-wrap { 
                h1 { font-size: 2em; margin-bottom: .3em }
                p { font-size: 1.3em }
                
            }
        }
        button {
            background: transparent; 
        }
    }

    .full-cover {
        height: 0; width: 100%; top: 0; left: 0;
        .content-wrap { 
            left: 32px; bottom: 20px; position: absolute; max-width: 500px;
        }
        &.fixed { position: fixed; z-index: -1; }
    }

    .inline-cover { 
        padding-left: 24px; padding-right: 24px;
        img { width: 100% }
    }

}

/* Large Pages */
.large-pages-common() {
    .small-page-element .tiny-page-element { display: none; }
    .large-page-element { display: block !important; }

    .auto-cover {
        position: fixed; height: 100%; top: 0; right: 0;
        .image {
            > .content-wrap { 
                left: 32px; bottom: 20px; position: absolute; max-width: 500px;
            }
        }
    }

    .top-cover { 
        height: 500px; position: relative;

        .content-wrap {
            position: absolute; bottom: 0px; padding:0 0 32px 32px; max-width: 600px;                
        }        
    } 

    .auto-cover+.main-pane {
        > .nav:first-child { margin-left: 40px; }
    }
}

.large-page-type(
    @minWidth,
    @contentAreaWidth,
    @altContentAreaWidth,
    @topCoverHeight, 
    @autoCoverWidth
) {
    .single-section-page, .multi-section-page {

        margin-top: -64px; padding-top: 64px;

        .main-pane {
            .page-content-area(@contentAreaWidth, 720px);
        }                

        .alt-pane { 
            .page-content-area(@altContentAreaWidth, 720px);
        }
        
        /* Inline covers have the same width as content area. Position on top */
        .inline-cover {
            width: @contentAreaWidth + 0px; margin: 64px auto 12px auto;
        }
                
        .full-cover.fixed, .inline-cover {
            + .main-pane {
                .content-area {
                    font-size: 0.9em;
                    &.item {
                        padding: 20px 32px; box-sizing: border-box; -moz-box-sizing: border-box; 
                    }
                }
            }
        }

        ul.cards {
            &.float {
                > li {
                    width: ((100 / floor((@minWidth - 160) / 300)) - 2) + 0%
                }
            }
        }
    }

    .single-section-page {

        /* No cover. 100% main-page width */
        .main-pane:first-child { 
            width: 100%; 
        }

        /* Auto cover in large pages position on the side. Adjust main-pane width */
        .auto-cover {
            width: @autoCoverWidth; left: (100% - @autoCoverWidth); 
            + .main-pane { 
                width: (100% - @autoCoverWidth); 
            }
        }
        
        /* Top, full and inline covers have 100% main-pane width */
        .top-cover, .full-cover, .inline-cover {
            + .main-pane { 
                width: 100%; 
            }
        }              
    }
}

/* Large page guards */
.large-pages(@minWidth) when (@minWidth >= 1720) {  
    .large-page-type(
        @minWidth,
        @contentAreaWidth: 720,
        @altContentAreaWidth: 720,
        @topCoverHeight: 400px, 
        @autoCoverWidth: 50%
    );
}

.large-pages(@minWidth) when (@minWidth >= 1400) and (@minWidth < 1720) {  
    .large-page-type(
        @minWidth,
        @contentAreaWidth: 720,
        @altContentAreaWidth: 520,
        @topCoverHeight: 400px, 
        @autoCoverWidth: 40%
    );
}

.large-pages(@minWidth) when (@minWidth >= 1200) and (@minWidth < 1400) {  
    .large-page-type(
        @minWidth,
        @contentAreaWidth: 600,
        @altContentAreaWidth: 400,
        @topCoverHeight: 400px, 
        @autoCoverWidth: 40%
    );
}

.large-pages(@minWidth) when (@minWidth < 1200) {  
    .large-page-type(
        @minWidth,
        @contentAreaWidth: 500,
        @altContentAreaWidth: 300,
        @topCoverHeight: 400px, 
        @autoCoverWidth: 36%
    );
}

/* Small Pages */
.small-pages-common() {

    .large-page-element .tiny-page-element { display: none; }
    .small-page-element { display: block !important; }    

    .single-section-page, .multi-section-page {
        margin-top: -64px; padding-top: 64px;

        .main-pane {
            .page-content-area(100%, 720px);
        }                

        .alt-pane { 
            .page-content-area(100%, 720px);
        }
        
        .auto-cover, .top-cover, .full-cover {
            font-size: 0.7em;
        }
        
        .auto-cover, .top-cover { 
            height: 400px; position: relative;
            .content-wrap {
                position: absolute; bottom: 0px; padding: 0 0 16px 16px; max-width: 400px;                
            }
        }
       
        .inline-cover {
            width: 100%; margin: 64px auto 12px auto;
        }
         
        .full-cover.fixed, .inline-cover {
            + .main-pane {
                .content-area {
                    font-size: 0.9em;
                    &.item {
                        padding: 20px 32px; box-sizing: border-box; -moz-box-sizing: border-box; 
                    }
                }
            }
        }
    }
}

.small-pages(@minWidth) when (@minWidth >= 720) {  
    .single-section-page, .multi-section-page {                
        ul.cards {
            &.float {
                > li {
                    width: ((100 / floor((@minWidth - 40) / 300)) - 2) + 0%
                }
            }
        }  
    }
}

.small-pages(@minWidth) when (@minWidth < 720) {  
    .single-section-page, .multi-section-page {                
        ul.cards {
            &.float {
                > li {
                    width: 100%;
                }
            }
        }  
    }
}
