ForaDbModel = require('./foramodel').ForaDbModel
models = require('./')

class UserInfo extends ForaDbModel

    @typeDefinition: {
        type: @,
        name: "user-info",
        collection: 'userinfo',
        fields: {
            userid: 'string',
            subscriptions: { type: 'array', contents: { type: "forum-summary" } },
            following: { type: 'array', contents: { type: "user-summary" } },
            lastMessageAccessTime: 'number !required',
            createdAt: { autoGenerated: true, event: 'created' },
            updatedAt: { autoGenerated: true, event: 'updated' }
        },
        logging: {
            onInsert: 'NEW_USER'
        }
    }

    
    constructor: (params) ->
        @subscriptions ?= []
        @following ?= []
        super
        


exports.UserInfo = UserInfo
